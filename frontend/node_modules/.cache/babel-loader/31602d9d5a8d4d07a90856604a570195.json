{"ast":null,"code":"var _jsxFileName = \"/Users/thanchanokmaneesutham/TPE/Internship/react-redux-hook/frontend/src/components/pages/admin/employee/employeeForm/EmployeesFormPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef, Fragment } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link, withRouter, NavLink } from \"react-router-dom\";\nimport makeStyles from '@mui/styles/makeStyles';\nimport clsx from \"clsx\";\nimport { useDropzone } from \"react-dropzone\";\nimport { Formik } from \"formik\";\nimport * as Yup from \"yup\";\nimport AddAPhotoIcon from \"@mui/icons-material/AddAPhoto\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport SaveIcon from \"@mui/icons-material/Save\";\nimport HeaderPage from \"./../../../shared/header/headerPage\";\nimport iconAddHeader from \"./../assets/add-employee.svg\";\nimport iconEditHeader from \"./../assets/edit-employee.svg\";\nimport { Paper, Button, Typography, FormControlLabel, Switch, Grid, TextField, FormControl, FormLabel, FormHelperText, InputLabel, FormGroup, Checkbox, MenuItem, Select, IconButton, Divider } from \"@mui/material\";\nimport UserService from \"./../../../../../services/user.service\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    padding: 16,\n    marginTop: 50\n  },\n  wrapHeader: {\n    marginTop: 16\n  },\n  divider: {\n    margin: \"10px 0\"\n  },\n  firstSection: {\n    padding: \"75px 24px\"\n  },\n  secondSection: {\n    padding: 24\n  },\n  imageProfile: {\n    marginBottom: 40\n  },\n  wrapCaptionImage: {\n    marginTop: 16,\n    textAlign: \"center\"\n  },\n  captionImage: {\n    color: \"#212b36\"\n  },\n  wrapSwitchActive: {\n    flexDirection: \"row-reverse\",\n    margin: 0,\n    width: \"100%\",\n    \"& .MuiFormControlLabel-label\": {\n      marginRight: \"auto\"\n    }\n  },\n  labelSwitchActive: {\n    fontSize: 14\n  },\n  row: {\n    marginBottom: 16\n  },\n  textField: {\n    width: \"100%\"\n  },\n  buttonSave: {\n    marginLeft: \"auto\"\n  },\n  uploadImage: {\n    width: \"105%\",\n    zIndex: 8\n  },\n  placeholder: {\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    position: \"absolute\",\n    alignItems: \"center\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    color: \"rgb(99, 115, 129)\",\n    backgroundColor: \"rgb(244, 246, 248)\",\n    transition: \"opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms\"\n  },\n  placeholderImageProfile: {\n    color: \"rgb(255, 255, 255)\",\n    backgroundColor: \"rgba(22, 28, 36, .72)\"\n  },\n  placeholderLabel: {\n    color: \"rgb(255, 255, 255)\"\n  }\n}));\n\nvar convertImgToDataURLviaCanvas = function (url, callback) {\n  var img = new Image();\n  img.crossOrigin = \"Anonymous\";\n\n  img.onload = function () {\n    var canvas = document.createElement(\"CANVAS\");\n    var ctx = canvas.getContext(\"2d\");\n    var dataURL;\n    canvas.height = this.height;\n    canvas.width = this.width;\n    ctx.drawImage(this, 0, 0);\n    dataURL = canvas.toDataURL();\n    callback(dataURL);\n    canvas = null;\n  };\n\n  img.src = url;\n};\n\nconst EmployeesCreatePage = props => {\n  _s();\n\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const formRef = useRef();\n  const {\n    result: departmentList\n  } = useSelector(state => state.department);\n  const {\n    result: userProfile\n  } = useSelector(state => state.userProfile);\n  const [fileSelected, setFileSelected] = useState([]);\n  const [check, setCheck] = useState(true);\n  const phoneRegExp = /^0\\d\\d-\\d\\d\\d-\\d\\d\\d\\d$/;\n  const validationSchema = Yup.object().shape({\n    firstname: Yup.string().required(\"Please enter firstname\"),\n    lastname: Yup.string().required(\"Please enter lastname\"),\n    position: Yup.string().required(\"Please enter position\"),\n    idDepartment: Yup.string().required(\"Please select department\"),\n    email: Yup.string().email().required(\"Enter valid email\"),\n    mobileNumber: Yup.string().required(\"Please enter mobilephone\").matches(phoneRegExp, \"Phone number is not valid\"),\n    site: Yup.string().required(\"Please select working location\")\n  });\n  const [dataEmployee, setDataEmployee] = useState({\n    username: \"\",\n    email: \"\",\n    image: \"\",\n    firstname: \"\",\n    lastname: \"\",\n    idDepartment: \"\",\n    department: \"\",\n    position: \"\",\n    mobileNumber: \"\",\n    workingLocation: \"\",\n    site: \"\",\n    status: true,\n    company: \"Thai Polyethylene Co., Ltd.\",\n    authorities: {\n      user: true,\n      manager: false,\n      admin: false\n    }\n  });\n  useEffect(() => () => {\n    loadDataEmployee(); // Make sure to revoke the data uris to avoid memory leaks\n\n    fileSelected.forEach(file => URL.revokeObjectURL(file.preview));\n  }, [fileSelected]);\n  useEffect(() => {\n    let isCancelled = false;\n\n    const fetchData = async () => {\n      try {\n        const {\n          data: result\n        } = await UserService.getUserProfile(props.match.params.id);\n\n        if (!isCancelled && result) {\n          const authorities = {\n            user: result.authorities.indexOf(\"ROLE_USER\") > 0,\n            manager: result.authorities.indexOf(\"ROLE_MANAGER\") > 0,\n            admin: result.authorities.indexOf(\"ROLE_ADMIN\") > 0\n          };\n          result.status = result.status == \"active\";\n          result.authorities = authorities;\n          convertImgToDataURLviaCanvas(`${process.env.REACT_APP_URL}image/profile/${result.image}`, function (base64_data) {\n            console.log(base64_data);\n            var arr = base64_data.split(\",\");\n            var mime = arr[0].match(/:(.*?);/)[1];\n            var bstr = atob(arr[1]);\n            var n = bstr.length;\n            var u8arr = new Uint8Array(n);\n\n            while (n--) {\n              u8arr[n] = bstr.charCodeAt(n);\n            }\n\n            var files = [];\n            var f = new Blob([u8arr], {\n              type: mime\n            });\n            const file = {\n              preview: URL.createObjectURL(f)\n            };\n            files.push(file);\n            setFileSelected(files);\n          });\n          setDataEmployee(result);\n        }\n      } catch (e) {\n        if (!isCancelled) {\n          console.log(e);\n        }\n      }\n    };\n\n    if (props.match.params.id) fetchData();\n    return () => {\n      isCancelled = true;\n    };\n  }, []);\n  const {\n    getRootProps,\n    getInputProps\n  } = useDropzone({\n    accept: \"image/jpeg, image/png\",\n    onDrop: acceptedFiles => {\n      let formData = new FormData();\n      acceptedFiles.map(file => formData.append(\"file\", file));\n      setFileSelected(acceptedFiles.map(file => Object.assign(file, {\n        preview: URL.createObjectURL(file)\n      })));\n    },\n    maxFiles: 1\n  });\n  const thumbs = fileSelected.map(file => /*#__PURE__*/_jsxDEV(\"img\", {\n    src: file.preview,\n    className: classes.uploadImage\n  }, file.name, false, {\n    fileName: _jsxFileName,\n    lineNumber: 259,\n    columnNumber: 5\n  }, this));\n\n  const handleClickSave = () => {\n    console.log(\"handleClickSave\");\n\n    if (formRef.current) {\n      formRef.current.handleSubmit();\n    }\n  };\n\n  const handleChangeActive = event => {\n    setDataEmployee({ ...dataEmployee,\n      [event.target.name]: event.target.checked\n    });\n  };\n\n  const handleChangeRole = event => {\n    let tempDataEmployee = { ...dataEmployee\n    };\n    tempDataEmployee.authorities[event.target.name] = event.target.checked;\n    setDataEmployee(tempDataEmployee);\n  };\n\n  const showForm = ({\n    values,\n    errors,\n    touched,\n    handleChange,\n    handleSubmit,\n    handleBlur,\n    isSubmitting\n  }) => {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.row,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              id: \"firstname\",\n              name: \"firstname\",\n              label: \"Firstname\",\n              variant: \"outlined\",\n              onChange: handleChange,\n              onBlur: handleBlur,\n              className: clsx(classes.textField),\n              value: values.firstname,\n              error: touched.firstname && Boolean(errors.firstname),\n              helperText: touched.firstname && errors.firstname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              id: \"lastname\",\n              name: \"lastname\",\n              label: \"Lastname\",\n              variant: \"outlined\",\n              onChange: handleChange,\n              onBlur: handleBlur,\n              className: clsx(classes.textField),\n              value: values.lastname,\n              error: touched.lastname && Boolean(errors.lastname),\n              helperText: touched.lastname && errors.lastname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.row,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              id: \"position\",\n              name: \"position\",\n              label: \"Position\",\n              variant: \"outlined\",\n              onChange: handleChange,\n              onBlur: handleBlur,\n              className: clsx(classes.textField),\n              value: values.position,\n              error: touched.position && Boolean(errors.position),\n              helperText: touched.position && errors.position\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(FormControl, {\n              variant: \"outlined\",\n              className: clsx(classes.textField),\n              error: touched.idDepartment && Boolean(errors.idDepartment),\n              children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                id: \"demo-simple-select-outlined-label\",\n                children: \"Department\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                labelId: \"demo-simple-select-outlined-label\",\n                id: \"demo-simple-select-outlined\",\n                label: \"Department\",\n                name: \"idDepartment\",\n                onChange: handleChange,\n                onBlur: handleBlur,\n                className: clsx(classes.textField),\n                value: values.idDepartment,\n                children: departmentList && departmentList.map(dep => /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: dep.id,\n                  children: dep.departmentName\n                }, dep.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 362,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n                children: touched.idDepartment && errors.idDepartment\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.row,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              id: \"mobileNumber\",\n              name: \"mobileNumber\",\n              label: \"Mobile Number\",\n              variant: \"outlined\",\n              onChange: handleChange,\n              onBlur: handleBlur,\n              className: clsx(classes.textField),\n              value: values.mobileNumber,\n              error: touched.mobileNumber && Boolean(errors.mobileNumber),\n              helperText: touched.mobileNumber && errors.mobileNumber\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              id: \"email\",\n              name: \"email\",\n              label: \"Email\",\n              variant: \"outlined\",\n              onChange: handleChange,\n              onBlur: handleBlur,\n              className: clsx(classes.textField),\n              value: values.email,\n              error: touched.email && Boolean(errors.email),\n              helperText: touched.email && errors.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.row,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(FormControl, {\n              variant: \"outlined\",\n              className: clsx(classes.textField),\n              error: touched.site && Boolean(errors.site),\n              children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                id: \"demo-simple-select-outlined-label\",\n                children: \"Working Location\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                labelId: \"site\",\n                id: \"site\",\n                label: \"working Location\",\n                name: \"site\",\n                onChange: handleChange,\n                onBlur: handleBlur,\n                className: clsx(classes.textField),\n                value: values.site,\n                children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: 1,\n                  children: \"TPE - Rayong Site#1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 427,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: 3,\n                  children: \"TPE - Rayong Site#3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 428,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: 7,\n                  children: \"TPE - Rayong Site#7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 429,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n                children: touched.site && errors.site\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 431,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              id: \"company\",\n              name: \"company\",\n              label: \"Company\",\n              value: dataEmployee.company,\n              variant: \"outlined\",\n              className: clsx(classes.textField),\n              disabled: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.row,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(FormControl, {\n              component: \"fieldset\",\n              className: classes.formControl,\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                component: \"legend\",\n                children: \"Role\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n                row: true,\n                children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n                  disabled: true,\n                  control: /*#__PURE__*/_jsxDEV(Checkbox, {\n                    checked: dataEmployee.authorities.user,\n                    onChange: handleChangeRole,\n                    name: \"user\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 456,\n                    columnNumber: 23\n                  }, this),\n                  label: \"User\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 453,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                  control: /*#__PURE__*/_jsxDEV(Checkbox, {\n                    checked: dataEmployee.authorities.manager,\n                    onChange: handleChangeRole,\n                    name: \"manager\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 466,\n                    columnNumber: 23\n                  }, this),\n                  label: \"Manager\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 464,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                  control: /*#__PURE__*/_jsxDEV(Checkbox, {\n                    checked: dataEmployee.authorities.admin,\n                    onChange: handleChangeRole,\n                    name: \"admin\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 476,\n                    columnNumber: 23\n                  }, this),\n                  label: \"Admin\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 474,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          variant: \"contained\",\n          color: \"primary\",\n          className: classes.buttonSave,\n          startIcon: /*#__PURE__*/_jsxDEV(SaveIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 24\n          }, this),\n          onClick: handleClickSave,\n          children: \"Create New Employee\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 7\n    }, this);\n  };\n\n  const loadDataEmployee = () => {};\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `page ${classes.root}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.wrapHeader,\n      children: props.match.params.id ? /*#__PURE__*/_jsxDEV(HeaderPage, {\n        textLabel: \"แก้ไขข้อมูล\",\n        icon: iconEditHeader\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(HeaderPage, {\n        textLabel: \"เพิ่มพนักงานใหม่\",\n        icon: iconAddHeader\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 509,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Divider, {\n      className: classes.divider\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 516,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 3,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 12,\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(Paper, {\n          elevation: 3,\n          className: classes.firstSection,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.imageProfile,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", { ...getRootProps({\n                className: \"dropzone\"\n              }),\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"inner-dropzone\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", { ...getInputProps()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 524,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Fragment, {\n                  children: thumbs\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 525,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `placeholder ${classes.placeholder} ${fileSelected.length != 0 && classes.placeholderImageProfile}`,\n                  children: [/*#__PURE__*/_jsxDEV(AddAPhotoIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 532,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    style: {\n                      marginTop: 8,\n                      backgroundColor: \"transparent\"\n                    },\n                    className: `${fileSelected != 0 && classes.placeholderLabel}`,\n                    variant: \"body2\",\n                    children: \"Upload Photo\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 533,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 526,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 523,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.wrapCaptionImage,\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"caption\",\n                className: classes.captionImage,\n                children: [\"Allowed *.jpeg, *.jpg, *.png\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 548,\n                  columnNumber: 19\n                }, this), \"max size of 3 MB\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 546,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 545,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 521,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              className: classes.wrapSwitchActive,\n              control: /*#__PURE__*/_jsxDEV(Switch, {\n                checked: dataEmployee.status,\n                onChange: handleChangeActive,\n                name: \"status\",\n                color: \"primary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 557,\n                columnNumber: 19\n              }, this),\n              label: /*#__PURE__*/_jsxDEV(Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  className: classes.labelSwitchActive,\n                  children: \"Active Employee\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 566,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body1\",\n                  color: \"textSecondary\",\n                  className: classes.labelSwitchActive,\n                  children: \"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 572,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 565,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 554,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 12,\n        md: 8,\n        children: /*#__PURE__*/_jsxDEV(Paper, {\n          elevation: 3,\n          className: classes.secondSection,\n          children: dataEmployee && /*#__PURE__*/_jsxDEV(Formik, {\n            enableReinitialize: true,\n            innerRef: formRef,\n            onSubmit: (values, {\n              setSubmitting\n            }) => {\n              console.log(values);\n            },\n            initialValues: dataEmployee,\n            validationSchema: validationSchema,\n            children: props => showForm(props)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 589,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 517,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 508,\n    columnNumber: 5\n  }, this);\n};\n\n_s(EmployeesCreatePage, \"oskSJses0SjXsHAUBPHjT7sCQAA=\", false, function () {\n  return [useStyles, useDispatch, useSelector, useSelector, useDropzone];\n});\n\n_c = EmployeesCreatePage;\nexport default EmployeesCreatePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"EmployeesCreatePage\");","map":{"version":3,"sources":["/Users/thanchanokmaneesutham/TPE/Internship/react-redux-hook/frontend/src/components/pages/admin/employee/employeeForm/EmployeesFormPage.js"],"names":["React","useEffect","useState","useRef","Fragment","useDispatch","useSelector","Link","withRouter","NavLink","makeStyles","clsx","useDropzone","Formik","Yup","AddAPhotoIcon","AddIcon","SaveIcon","HeaderPage","Paper","Button","Typography","FormControlLabel","Switch","Grid","TextField","FormControl","FormLabel","FormHelperText","InputLabel","FormGroup","Checkbox","MenuItem","Select","IconButton","Divider","UserService","useStyles","theme","root","padding","marginTop","wrapHeader","divider","margin","firstSection","secondSection","imageProfile","marginBottom","wrapCaptionImage","textAlign","captionImage","color","wrapSwitchActive","flexDirection","width","marginRight","labelSwitchActive","fontSize","row","textField","buttonSave","marginLeft","uploadImage","zIndex","placeholder","height","display","position","alignItems","justifyContent","backgroundColor","transition","placeholderImageProfile","placeholderLabel","convertImgToDataURLviaCanvas","url","callback","img","Image","crossOrigin","onload","canvas","document","createElement","ctx","getContext","dataURL","drawImage","toDataURL","src","EmployeesCreatePage","props","classes","dispatch","formRef","result","departmentList","state","department","userProfile","fileSelected","setFileSelected","check","setCheck","phoneRegExp","validationSchema","object","shape","firstname","string","required","lastname","idDepartment","email","mobileNumber","matches","site","dataEmployee","setDataEmployee","username","image","workingLocation","status","company","authorities","user","manager","admin","loadDataEmployee","forEach","file","URL","revokeObjectURL","preview","isCancelled","fetchData","data","getUserProfile","match","params","id","indexOf","process","env","REACT_APP_URL","base64_data","console","log","arr","split","mime","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","files","f","Blob","type","createObjectURL","push","e","getRootProps","getInputProps","accept","onDrop","acceptedFiles","formData","FormData","map","append","Object","assign","maxFiles","thumbs","name","handleClickSave","current","handleSubmit","handleChangeActive","event","target","checked","handleChangeRole","tempDataEmployee","showForm","values","errors","touched","handleChange","handleBlur","isSubmitting","Boolean","dep","departmentName","formControl","iconEditHeader","iconAddHeader","className","setSubmitting"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef, Fragment } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link, withRouter, NavLink } from \"react-router-dom\";\nimport makeStyles from '@mui/styles/makeStyles';\nimport clsx from \"clsx\";\n\nimport { useDropzone } from \"react-dropzone\";\nimport { Formik } from \"formik\";\nimport * as Yup from \"yup\";\n\nimport AddAPhotoIcon from \"@mui/icons-material/AddAPhoto\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport SaveIcon from \"@mui/icons-material/Save\";\n\nimport HeaderPage from \"./../../../shared/header/headerPage\";\n\nimport iconAddHeader from \"./../assets/add-employee.svg\";\nimport iconEditHeader from \"./../assets/edit-employee.svg\";\n\nimport {\n  Paper,\n  Button,\n  Typography,\n  FormControlLabel,\n  Switch,\n  Grid,\n  TextField,\n  FormControl,\n  FormLabel,\n  FormHelperText,\n  InputLabel,\n  FormGroup,\n  Checkbox,\n  MenuItem,\n  Select,\n  IconButton,\n  Divider,\n} from \"@mui/material\";\n\nimport UserService from \"./../../../../../services/user.service\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: 16,\n    marginTop: 50,\n  },\n  wrapHeader: {\n    marginTop: 16,\n  },\n  divider: {\n    margin: \"10px 0\",\n  },\n  firstSection: {\n    padding: \"75px 24px\",\n  },\n  secondSection: {\n    padding: 24,\n  },\n  imageProfile: {\n    marginBottom: 40,\n  },\n  wrapCaptionImage: {\n    marginTop: 16,\n    textAlign: \"center\",\n  },\n  captionImage: {\n    color: \"#212b36\",\n  },\n  wrapSwitchActive: {\n    flexDirection: \"row-reverse\",\n    margin: 0,\n    width: \"100%\",\n    \"& .MuiFormControlLabel-label\": {\n      marginRight: \"auto\",\n    },\n  },\n  labelSwitchActive: {\n    fontSize: 14,\n  },\n  row: {\n    marginBottom: 16,\n  },\n  textField: {\n    width: \"100%\",\n  },\n  buttonSave: {\n    marginLeft: \"auto\",\n  },\n  uploadImage: {\n    width: \"105%\",\n    zIndex: 8,\n  },\n  placeholder: {\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    position: \"absolute\",\n    alignItems: \"center\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    color: \"rgb(99, 115, 129)\",\n    backgroundColor: \"rgb(244, 246, 248)\",\n    transition: \"opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms\",\n  },\n  placeholderImageProfile: {\n    color: \"rgb(255, 255, 255)\",\n    backgroundColor: \"rgba(22, 28, 36, .72)\",\n  },\n  placeholderLabel: {\n    color: \"rgb(255, 255, 255)\",\n  },\n}));\n\nvar convertImgToDataURLviaCanvas = function (url, callback) {\n  var img = new Image();\n\n  img.crossOrigin = \"Anonymous\";\n\n  img.onload = function () {\n    var canvas = document.createElement(\"CANVAS\");\n    var ctx = canvas.getContext(\"2d\");\n    var dataURL;\n    canvas.height = this.height;\n    canvas.width = this.width;\n    ctx.drawImage(this, 0, 0);\n    dataURL = canvas.toDataURL();\n    callback(dataURL);\n    canvas = null;\n  };\n\n  img.src = url;\n};\n\nconst EmployeesCreatePage = (props) => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const formRef = useRef();\n  const { result: departmentList } = useSelector((state) => state.department);\n  const { result: userProfile } = useSelector((state) => state.userProfile);\n  const [fileSelected, setFileSelected] = useState([]);\n  const [check, setCheck] = useState(true);\n\n  const phoneRegExp = /^0\\d\\d-\\d\\d\\d-\\d\\d\\d\\d$/;\n  const validationSchema = Yup.object().shape({\n    firstname: Yup.string().required(\"Please enter firstname\"),\n    lastname: Yup.string().required(\"Please enter lastname\"),\n    position: Yup.string().required(\"Please enter position\"),\n    idDepartment: Yup.string().required(\"Please select department\"),\n    email: Yup.string().email().required(\"Enter valid email\"),\n    mobileNumber: Yup.string()\n      .required(\"Please enter mobilephone\")\n      .matches(phoneRegExp, \"Phone number is not valid\"),\n    site: Yup.string().required(\"Please select working location\"),\n  });\n\n  const [dataEmployee, setDataEmployee] = useState({\n    username: \"\",\n    email: \"\",\n    image: \"\",\n    firstname: \"\",\n    lastname: \"\",\n    idDepartment: \"\",\n    department: \"\",\n    position: \"\",\n    mobileNumber: \"\",\n    workingLocation: \"\",\n    site: \"\",\n    status: true,\n    company: \"Thai Polyethylene Co., Ltd.\",\n    authorities: {\n      user: true,\n      manager: false,\n      admin: false,\n    },\n  });\n\n  useEffect(\n    () => () => {\n      loadDataEmployee();\n      // Make sure to revoke the data uris to avoid memory leaks\n      fileSelected.forEach((file) => URL.revokeObjectURL(file.preview));\n    },\n    [fileSelected]\n  );\n\n  useEffect(() => {\n    let isCancelled = false;\n    const fetchData = async () => {\n      try {\n        const { data: result } = await UserService.getUserProfile(\n          props.match.params.id\n        );\n\n        if (!isCancelled && result) {\n          const authorities = {\n            user: result.authorities.indexOf(\"ROLE_USER\") > 0,\n            manager: result.authorities.indexOf(\"ROLE_MANAGER\") > 0,\n            admin: result.authorities.indexOf(\"ROLE_ADMIN\") > 0,\n          };\n          result.status = result.status == \"active\";\n          result.authorities = authorities;\n\n          convertImgToDataURLviaCanvas(\n            `${process.env.REACT_APP_URL}image/profile/${result.image}`,\n            function (base64_data) {\n              console.log(base64_data);\n              var arr = base64_data.split(\",\");\n              var mime = arr[0].match(/:(.*?);/)[1];\n              var bstr = atob(arr[1]);\n              var n = bstr.length;\n              var u8arr = new Uint8Array(n);\n              while (n--) {\n                u8arr[n] = bstr.charCodeAt(n);\n              }\n              var files = [];\n              var f = new Blob([u8arr], { type: mime });\n              const file = {\n                preview: URL.createObjectURL(f),\n              };\n\n              files.push(file);\n              setFileSelected(files);\n            }\n          );\n\n          setDataEmployee(result);\n        }\n      } catch (e) {\n        if (!isCancelled) {\n          console.log(e);\n        }\n      }\n    };\n\n    if (props.match.params.id) fetchData();\n\n    return () => {\n      isCancelled = true;\n    };\n  }, []);\n\n  const { getRootProps, getInputProps } = useDropzone({\n    accept: \"image/jpeg, image/png\",\n    onDrop: (acceptedFiles) => {\n      let formData = new FormData();\n      acceptedFiles.map((file) => formData.append(\"file\", file));\n      setFileSelected(\n        acceptedFiles.map((file) =>\n          Object.assign(file, {\n            preview: URL.createObjectURL(file),\n          })\n        )\n      );\n    },\n    maxFiles: 1,\n  });\n\n  const thumbs = fileSelected.map((file) => (\n    <img key={file.name} src={file.preview} className={classes.uploadImage} />\n  ));\n\n  const handleClickSave = () => {\n    console.log(\"handleClickSave\");\n    if (formRef.current) {\n      formRef.current.handleSubmit();\n    }\n  };\n\n  const handleChangeActive = (event) => {\n    setDataEmployee({\n      ...dataEmployee,\n      [event.target.name]: event.target.checked,\n    });\n  };\n\n  const handleChangeRole = (event) => {\n    let tempDataEmployee = { ...dataEmployee };\n    tempDataEmployee.authorities[event.target.name] = event.target.checked;\n    setDataEmployee(tempDataEmployee);\n  };\n\n  const showForm = ({\n    values,\n    errors,\n    touched,\n    handleChange,\n    handleSubmit,\n    handleBlur,\n    isSubmitting,\n  }) => {\n    return (\n      <form onSubmit={handleSubmit}>\n        <div className={classes.row}>\n          <Grid container spacing={3}>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                id=\"firstname\"\n                name=\"firstname\"\n                label=\"Firstname\"\n                variant=\"outlined\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                className={clsx(classes.textField)}\n                value={values.firstname}\n                error={touched.firstname && Boolean(errors.firstname)}\n                helperText={touched.firstname && errors.firstname}\n              />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                id=\"lastname\"\n                name=\"lastname\"\n                label=\"Lastname\"\n                variant=\"outlined\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                className={clsx(classes.textField)}\n                value={values.lastname}\n                error={touched.lastname && Boolean(errors.lastname)}\n                helperText={touched.lastname && errors.lastname}\n              />\n            </Grid>\n          </Grid>\n        </div>\n        <div className={classes.row}>\n          <Grid container spacing={3}>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                id=\"position\"\n                name=\"position\"\n                label=\"Position\"\n                variant=\"outlined\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                className={clsx(classes.textField)}\n                value={values.position}\n                error={touched.position && Boolean(errors.position)}\n                helperText={touched.position && errors.position}\n              />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <FormControl\n                variant=\"outlined\"\n                className={clsx(classes.textField)}\n                error={touched.idDepartment && Boolean(errors.idDepartment)}\n              >\n                <InputLabel id=\"demo-simple-select-outlined-label\">\n                  Department\n                </InputLabel>\n                <Select\n                  labelId=\"demo-simple-select-outlined-label\"\n                  id=\"demo-simple-select-outlined\"\n                  label=\"Department\"\n                  name=\"idDepartment\"\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  className={clsx(classes.textField)}\n                  value={values.idDepartment}\n                >\n                  {departmentList &&\n                    departmentList.map((dep) => (\n                      <MenuItem key={dep.id} value={dep.id}>\n                        {dep.departmentName}\n                      </MenuItem>\n                    ))}\n                </Select>\n                <FormHelperText>\n                  {touched.idDepartment && errors.idDepartment}\n                </FormHelperText>\n              </FormControl>\n            </Grid>\n          </Grid>\n        </div>\n        <div className={classes.row}>\n          <Grid container spacing={3}>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                id=\"mobileNumber\"\n                name=\"mobileNumber\"\n                label=\"Mobile Number\"\n                variant=\"outlined\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                className={clsx(classes.textField)}\n                value={values.mobileNumber}\n                error={touched.mobileNumber && Boolean(errors.mobileNumber)}\n                helperText={touched.mobileNumber && errors.mobileNumber}\n              />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                id=\"email\"\n                name=\"email\"\n                label=\"Email\"\n                variant=\"outlined\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                className={clsx(classes.textField)}\n                value={values.email}\n                error={touched.email && Boolean(errors.email)}\n                helperText={touched.email && errors.email}\n              />\n            </Grid>\n          </Grid>\n        </div>\n        <div className={classes.row}>\n          <Grid container spacing={3}>\n            <Grid item xs={12} sm={6}>\n              <FormControl\n                variant=\"outlined\"\n                className={clsx(classes.textField)}\n                error={touched.site && Boolean(errors.site)}\n              >\n                <InputLabel id=\"demo-simple-select-outlined-label\">\n                  Working Location\n                </InputLabel>\n                <Select\n                  labelId=\"site\"\n                  id=\"site\"\n                  label=\"working Location\"\n                  name=\"site\"\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  className={clsx(classes.textField)}\n                  value={values.site}\n                >\n                  <MenuItem value={1}>TPE - Rayong Site#1</MenuItem>\n                  <MenuItem value={3}>TPE - Rayong Site#3</MenuItem>\n                  <MenuItem value={7}>TPE - Rayong Site#7</MenuItem>\n                </Select>\n                <FormHelperText>{touched.site && errors.site}</FormHelperText>\n              </FormControl>\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                id=\"company\"\n                name=\"company\"\n                label=\"Company\"\n                value={dataEmployee.company}\n                variant=\"outlined\"\n                className={clsx(classes.textField)}\n                disabled\n              />\n            </Grid>\n          </Grid>\n        </div>\n        <div className={classes.row}>\n          <Grid container spacing={3}>\n            <Grid item>\n              <FormControl component=\"fieldset\" className={classes.formControl}>\n                <FormLabel component=\"legend\">Role</FormLabel>\n                <FormGroup row>\n                  <FormControlLabel\n                    disabled\n                    control={\n                      <Checkbox\n                        checked={dataEmployee.authorities.user}\n                        onChange={handleChangeRole}\n                        name=\"user\"\n                      />\n                    }\n                    label=\"User\"\n                  />\n                  <FormControlLabel\n                    control={\n                      <Checkbox\n                        checked={dataEmployee.authorities.manager}\n                        onChange={handleChangeRole}\n                        name=\"manager\"\n                      />\n                    }\n                    label=\"Manager\"\n                  />\n                  <FormControlLabel\n                    control={\n                      <Checkbox\n                        checked={dataEmployee.authorities.admin}\n                        onChange={handleChangeRole}\n                        name=\"admin\"\n                      />\n                    }\n                    label=\"Admin\"\n                  />\n                </FormGroup>\n              </FormControl>\n            </Grid>\n          </Grid>\n        </div>\n        <div>\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.buttonSave}\n            startIcon={<SaveIcon />}\n            onClick={handleClickSave}\n          >\n            Create New Employee\n          </Button>\n        </div>\n      </form>\n    );\n  };\n\n  const loadDataEmployee = () => {};\n\n  return (\n    <div className={`page ${classes.root}`}>\n      <div className={classes.wrapHeader}>\n        {props.match.params.id ? (\n          <HeaderPage textLabel={\"แก้ไขข้อมูล\"} icon={iconEditHeader} />\n        ) : (\n          <HeaderPage textLabel={\"เพิ่มพนักงานใหม่\"} icon={iconAddHeader} />\n        )}\n      </div>\n      <Divider className={classes.divider} />\n      <Grid container spacing={3}>\n        <Grid item xs={12} sm={12} md={4}>\n          <Paper elevation={3} className={classes.firstSection}>\n            {/* <div>{thumbs}</div> */}\n            <div className={classes.imageProfile}>\n              <div {...getRootProps({ className: \"dropzone\" })}>\n                <div className=\"inner-dropzone\">\n                  <input {...getInputProps()} />\n                  <Fragment>{thumbs}</Fragment>\n                  <div\n                    className={`placeholder ${classes.placeholder} ${\n                      fileSelected.length != 0 &&\n                      classes.placeholderImageProfile\n                    }`}\n                  >\n                    <AddAPhotoIcon />\n                    <Typography\n                      style={{ marginTop: 8, backgroundColor: \"transparent\" }}\n                      className={`${\n                        fileSelected != 0 && classes.placeholderLabel\n                      }`}\n                      variant=\"body2\"\n                    >\n                      Upload Photo\n                    </Typography>\n                  </div>\n                </div>\n              </div>\n              <div className={classes.wrapCaptionImage}>\n                <Typography variant=\"caption\" className={classes.captionImage}>\n                  Allowed *.jpeg, *.jpg, *.png\n                  <br />\n                  max size of 3 MB\n                </Typography>\n              </div>\n            </div>\n            <div>\n              <FormControlLabel\n                className={classes.wrapSwitchActive}\n                control={\n                  <Switch\n                    checked={dataEmployee.status}\n                    onChange={handleChangeActive}\n                    name=\"status\"\n                    color=\"primary\"\n                  />\n                }\n                label={\n                  <Fragment>\n                    <Typography\n                      variant=\"h6\"\n                      className={classes.labelSwitchActive}\n                    >\n                      Active Employee\n                    </Typography>\n                    <Typography\n                      variant=\"body1\"\n                      color=\"textSecondary\"\n                      className={classes.labelSwitchActive}\n                    >\n                      Lorem Ipsum is simply dummy text of the printing and\n                      typesetting industry. Lorem Ipsum has been\n                    </Typography>\n                  </Fragment>\n                }\n              />\n            </div>\n          </Paper>\n        </Grid>\n        <Grid item xs={12} sm={12} md={8}>\n          <Paper elevation={3} className={classes.secondSection}>\n            {dataEmployee && (\n              <Formik\n                enableReinitialize\n                innerRef={formRef}\n                onSubmit={(values, { setSubmitting }) => {\n                  console.log(values);\n                }}\n                initialValues={dataEmployee}\n                validationSchema={validationSchema}\n              >\n                {(props) => showForm(props)}\n              </Formik>\n            )}\n          </Paper>\n        </Grid>\n      </Grid>\n    </div>\n  );\n};\n\nexport default EmployeesCreatePage;\n"]},"metadata":{},"sourceType":"module"}